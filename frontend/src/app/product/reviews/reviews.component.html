
<h1 class="mt-2">Reviews ({{reviews().length}})</h1>
<form #reviewForm="ngForm" (ngSubmit)="onSubmit(reviewForm)" class="d-flex flex-column gap-2 p-2">
  <app-star-rating
    name="serviceRating"
    [ngModel]="newReview().rating"
    (ngModelChange)="ratingChanged($event)">
  </app-star-rating>

  <div class="d-flex gap-4 align-items-center">
    <mat-form-field>
    <mat-label>Review text</mat-label>
    <input matInput type="text" name="text" [ngModel]="newReview().text" (ngModelChange)="textChanged($event)" required>
  </mat-form-field>
    <button mat-button type="submit">submit</button></div>
</form>

<div class="d-flex flex-column gap-2">
  @for(review of reviews();track review.id){
    <div class="review">

        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex gap-3">
            <span><b>Username:</b> {{review.postedBy}}</span>
            <div>
              @for(i of getStars(review.rating);track i){‚≠ê}
            </div>
          </div>
          <span>{{getDate(review.createdAt)}}</span>
        </div>

      <div class="d-flex justify-content-between align-items-center">
        <span>{{review.text}}</span>
        <button mat-icon-button aria-label="delete review"><mat-icon>favourite</mat-icon></button>
      </div>
    </div>
  }
</div>
